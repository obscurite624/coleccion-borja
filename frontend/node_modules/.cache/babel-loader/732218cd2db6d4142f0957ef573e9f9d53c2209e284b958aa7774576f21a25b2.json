{"ast":null,"code":"import { createSlice, createAsyncThunk } from '@reduxjs/toolkit';\nexport const saveProductAsync = createAsyncThunk('authentication/saveProductAsync', async (productData, thunkAPI) => {\n  try {\n    const response = await fetch('/api/insertData', {\n      method: 'POST',\n      headers: {\n        'Content-Type': 'application/json'\n      },\n      body: JSON.stringify(productData)\n    });\n    if (!response.ok) {\n      throw new Error('Error al guardar el producto en el backend');\n    }\n    return productData;\n  } catch (error) {\n    return thunkAPI.rejectWithValue(error.message);\n  }\n});\nconst initialAuthState = {\n  isAutenticated: false,\n  userName: '',\n  userRol: '',\n  products: []\n};\nconst authSlice = createSlice({\n  name: 'authentication',\n  initialState: initialAuthState,\n  reducers: {\n    login: (state, action) => {\n      const userData = action.payload;\n      state.isAutenticated = true;\n      state.userName = userData.name;\n      state.userRol = userData.rol;\n    },\n    logout: state => {\n      state.isAutenticated = false;\n      state.userName = '';\n      state.userRol = '';\n    }\n  },\n  extraReducers: builder => {\n    builder.addCase(saveProductAsync.fulfilled, (state, action) => {\n      state.products.push(action.payload);\n    });\n  }\n});\nexport const {\n  login,\n  logout\n} = authSlice.actions;\nexport default authSlice.reducer;","map":{"version":3,"names":["createSlice","createAsyncThunk","saveProductAsync","productData","thunkAPI","response","fetch","method","headers","body","JSON","stringify","ok","Error","error","rejectWithValue","message","initialAuthState","isAutenticated","userName","userRol","products","authSlice","name","initialState","reducers","login","state","action","userData","payload","rol","logout","extraReducers","builder","addCase","fulfilled","push","actions","reducer"],"sources":["C:/Users/borja/Documents/clase/dad/ProyectosReact/coleccion-borja/frontend/src/store/storeLogin.js"],"sourcesContent":["import { createSlice, createAsyncThunk } from '@reduxjs/toolkit';\r\n\r\nexport const saveProductAsync = createAsyncThunk(\r\n    'authentication/saveProductAsync',\r\n    async (productData, thunkAPI) => {\r\n        try {\r\n            const response = await fetch('/api/insertData', {\r\n                method: 'POST',\r\n                headers: {\r\n                    'Content-Type': 'application/json',\r\n                },\r\n                body: JSON.stringify(productData),\r\n            });\r\n\r\n            if (!response.ok) {\r\n                throw new Error('Error al guardar el producto en el backend');\r\n            }\r\n\r\n            return productData;\r\n        } catch (error) {\r\n            return thunkAPI.rejectWithValue(error.message);\r\n        }\r\n    }\r\n);\r\n\r\nconst initialAuthState = {\r\n    isAutenticated: false,\r\n    userName: '',\r\n    userRol: '',\r\n    products: [],\r\n};\r\n\r\nconst authSlice = createSlice({\r\n    name: 'authentication',\r\n    initialState: initialAuthState,\r\n    reducers: {\r\n        login: (state, action) => {\r\n            const userData = action.payload;\r\n            state.isAutenticated = true;\r\n            state.userName = userData.name;\r\n            state.userRol = userData.rol;\r\n        },\r\n        logout: (state) => {\r\n            state.isAutenticated = false;\r\n            state.userName = '';\r\n            state.userRol = '';\r\n        },\r\n    },\r\n    extraReducers: (builder) => {\r\n        builder.addCase(saveProductAsync.fulfilled, (state, action) => {\r\n            state.products.push(action.payload);\r\n        });\r\n    },\r\n});\r\n\r\nexport const { login, logout } = authSlice.actions;\r\nexport default authSlice.reducer;\r\n"],"mappings":"AAAA,SAASA,WAAW,EAAEC,gBAAgB,QAAQ,kBAAkB;AAEhE,OAAO,MAAMC,gBAAgB,GAAGD,gBAAgB,CAC5C,iCAAiC,EACjC,OAAOE,WAAW,EAAEC,QAAQ,KAAK;EAC7B,IAAI;IACA,MAAMC,QAAQ,GAAG,MAAMC,KAAK,CAAC,iBAAiB,EAAE;MAC5CC,MAAM,EAAE,MAAM;MACdC,OAAO,EAAE;QACL,cAAc,EAAE;MACpB,CAAC;MACDC,IAAI,EAAEC,IAAI,CAACC,SAAS,CAACR,WAAW;IACpC,CAAC,CAAC;IAEF,IAAI,CAACE,QAAQ,CAACO,EAAE,EAAE;MACd,MAAM,IAAIC,KAAK,CAAC,4CAA4C,CAAC;IACjE;IAEA,OAAOV,WAAW;EACtB,CAAC,CAAC,OAAOW,KAAK,EAAE;IACZ,OAAOV,QAAQ,CAACW,eAAe,CAACD,KAAK,CAACE,OAAO,CAAC;EAClD;AACJ,CACJ,CAAC;AAED,MAAMC,gBAAgB,GAAG;EACrBC,cAAc,EAAE,KAAK;EACrBC,QAAQ,EAAE,EAAE;EACZC,OAAO,EAAE,EAAE;EACXC,QAAQ,EAAE;AACd,CAAC;AAED,MAAMC,SAAS,GAAGtB,WAAW,CAAC;EAC1BuB,IAAI,EAAE,gBAAgB;EACtBC,YAAY,EAAEP,gBAAgB;EAC9BQ,QAAQ,EAAE;IACNC,KAAK,EAAEA,CAACC,KAAK,EAAEC,MAAM,KAAK;MACtB,MAAMC,QAAQ,GAAGD,MAAM,CAACE,OAAO;MAC/BH,KAAK,CAACT,cAAc,GAAG,IAAI;MAC3BS,KAAK,CAACR,QAAQ,GAAGU,QAAQ,CAACN,IAAI;MAC9BI,KAAK,CAACP,OAAO,GAAGS,QAAQ,CAACE,GAAG;IAChC,CAAC;IACDC,MAAM,EAAGL,KAAK,IAAK;MACfA,KAAK,CAACT,cAAc,GAAG,KAAK;MAC5BS,KAAK,CAACR,QAAQ,GAAG,EAAE;MACnBQ,KAAK,CAACP,OAAO,GAAG,EAAE;IACtB;EACJ,CAAC;EACDa,aAAa,EAAGC,OAAO,IAAK;IACxBA,OAAO,CAACC,OAAO,CAACjC,gBAAgB,CAACkC,SAAS,EAAE,CAACT,KAAK,EAAEC,MAAM,KAAK;MAC3DD,KAAK,CAACN,QAAQ,CAACgB,IAAI,CAACT,MAAM,CAACE,OAAO,CAAC;IACvC,CAAC,CAAC;EACN;AACJ,CAAC,CAAC;AAEF,OAAO,MAAM;EAAEJ,KAAK;EAAEM;AAAO,CAAC,GAAGV,SAAS,CAACgB,OAAO;AAClD,eAAehB,SAAS,CAACiB,OAAO"},"metadata":{},"sourceType":"module","externalDependencies":[]}